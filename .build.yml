image: alpine/edge
packages:
  - go
  - rsync
sources:
  - https://github.com/LearningBay24/Learningbay24-backend
secrets:
  - 3a8daec5-761a-4c5f-951f-f6463081dce2 # deploy
tasks:
  - build: |
      cd Learningbay24-backend
      go build
  - deploy: |
      echo "StrictHostKeyChecking=no" >> ~/.ssh/config
      cd Learningbay24-backend
      rsync -r ./backend srht-deploy@learningbay24.de:/opt/LearningBay24-backend/
